{# templates/product/index.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Product List{% endblock %}

{% block body %}
    <h1>Product List</h1>
    <ul>
        {% for product in products %}
            <div style="border: 1px solid #000; margin-bottom: 10px; padding:10px; width: fit-content;">
                <p><strong>Name:</strong> {{ product.name }}</p> 
                <p><strong>Description:</strong> {{ product.description }}</p> 
                <img src="{{ product.photo }}" alt="Error {{ product.name }} photo" width="400">
                <div><strong>Price:</strong>{{ product.price }}â‚¬</div>
                <a style=" text-decoration:none;" href="{{ path('app_remove_product', { id: product.id }) }}">
                    <button type="button" style="cursor: pointer; padding: 10px; background-color: red; color: #fff; border: none;">
                        Delete
                    </button>
                </a>
                
            </div>
        {% else %}
            <li>No products found.</li>
        {% endfor %}
        
            <a style=" text-decoration:none;" href="/product/add">
                <button type="button" style="cursor: pointer; padding: 10px; background-color: rebeccapurple;  color: #fff;">
                    Add Products
                </button>
            </a>
        
    </ul>
    <script>
        document.querySelectorAll('a[href*="app_remove_product"]').forEach(function(link) {
            link.addEventListener('click', function(e) {
                if (!confirm('Are you sure you want to delete this product?')) {
                    e.preventDefault();
                }
            });
        });
    </script>
{% endblock %}